import{getAssetFromKV}from"@cloudflare/kv-asset-handler";import manifestJSON from"__STATIC_CONTENT_MANIFEST";const assetManifest=JSON.parse(manifestJSON);export default{async fetch(t,e,a){const s=new URL(t.url);if(s.pathname.startsWith("/docs")&&!s.pathname.endsWith("/")&&!s.pathname.split("/").pop().includes("."))return Response.redirect(s.origin+s.pathname+"/",301);s.pathname.startsWith("/docs")&&(s.pathname=s.pathname.replace(/^\/docs/,"")||"/");const n=new Request(s,t);try{return await getAssetFromKV({request:n,waitUntil:a.waitUntil.bind(a)},{ASSET_NAMESPACE:e.__STATIC_CONTENT,ASSET_MANIFEST:assetManifest})}catch(n){return s.pathname="/index.html",await getAssetFromKV({request:new Request(s,t),waitUntil:a.waitUntil.bind(a)},{ASSET_NAMESPACE:e.__STATIC_CONTENT,ASSET_MANIFEST:assetManifest})}}};
